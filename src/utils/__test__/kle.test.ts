import { assertArrayEquality } from "./utils";
import { parse } from "../kle";

describe("Deserializes KLE json", () => {
    test("Converts a 60% KLE to a list of key elements", () => {
        const ansi60Kle = [
            ["~\n`","!\n1","@\n2","#\n3","$\n4","%\n5","^\n6","&\n7","*\n8","(\n9",")\n0","_\n-","+\n=",{w:2},"Backspace"],
            [{w:1.5},"Tab","Q","W","E","R","T","Y","U","I","O","P","{\n[","}\n]",{w:1.5},"|\n\\"],
            [{w:1.75},"Caps Lock","A","S","D","F","G","H","J","K","L",":\n;","\"\n'",{w:2.25},"Enter"],
            [{w:2.25},"Shift","Z","X","C","V","B","N","M","<\n,",">\n.","?\n/",{w:2.75},"Shift"],
            [{w:1.25},"Ctrl",{w:1.25},"Win",{w:1.25},"Alt",{a:7,w:6.25},"",{a:4,w:1.25},"Alt",{w:1.25},"Win",{w:1.25},"Menu",{w:1.25},"Ctrl"]
        ]

        const ansi60KeyElements = [{"position":{"x":0,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":1,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":2,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":3,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":4,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":5,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":6,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":7,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":8,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":9,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":10,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":11,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":12,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":13,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":2,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":2,"height":1}},{"position":{"x":0,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.5,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.5,"height":1}},{"position":{"x":1.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":2.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":3.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":4.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":5.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":6.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":7.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":8.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":9.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":10.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":11.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":12.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":13.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.5,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.5,"height":1}},{"position":{"x":0,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.75,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.75,"height":1}},{"position":{"x":1.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":2.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":3.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":4.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":5.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":6.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":7.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":8.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":9.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":10.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":11.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":12.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":2.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":2.25,"height":1}},{"position":{"x":0,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":2.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":2.25,"height":1}},{"position":{"x":2.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":3.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":4.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":5.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":6.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":7.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":8.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":9.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":10.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":11.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":12.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":2.75,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":2.75,"height":1}},{"position":{"x":0,"y":4},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.25,"height":1}},{"position":{"x":1.25,"y":4},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.25,"height":1}},{"position":{"x":2.5,"y":4},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.25,"height":1}},{"position":{"x":3.75,"y":4},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":6.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":6.25,"height":1}},{"position":{"x":10,"y":4},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.25,"height":1}},{"position":{"x":11.25,"y":4},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.25,"height":1}},{"position":{"x":12.5,"y":4},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.25,"height":1}},{"position":{"x":13.75,"y":4},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.25,"height":1}}];

        assertArrayEquality(parse(ansi60Kle), ansi60KeyElements);
    });

    test("Converts a 60% ISO KLE to a list of key elements", () => {
        const iso60Kle = [
            ["¬\n`","!\n1","\"\n2","£\n3","$\n4","%\n5","^\n6","&\n7","*\n8","(\n9",")\n0","_\n-","+\n=",{w:2},"Backspace"],
            [{w:1.5},"Tab","Q","W","E","R","T","Y","U","I","O","P","{\n[","}\n]",{x:0.25,w:1.25,h:2,w2:1.5,h2:1,x2:-0.25},"Enter"],
            [{w:1.75},"Caps Lock","A","S","D","F","G","H","J","K","L",":\n;","@\n'","~\n#"],
            [{w:1.25},"Shift","|\n\\","Z","X","C","V","B","N","M","<\n,",">\n.","?\n/",{w:2.75},"Shift"],
            [{w:1.25},"Ctrl",{w:1.25},"Win",{w:1.25},"Alt",{a:7,w:6.25},"",{a:4,w:1.25},"AltGr",{w:1.25},"Win",{w:1.25},"Menu",{w:1.25},"Ctrl"]  
        ]

        const iso60KeyElements = [{"position":{"x":0,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":1,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":2,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":3,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":4,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":5,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":6,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":7,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":8,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":9,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":10,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":11,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":12,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":13,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":2,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":2,"height":1}},{"position":{"x":0,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.5,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.5,"height":1}},{"position":{"x":1.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":2.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":3.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":4.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":5.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":6.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":7.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":8.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":9.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":10.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":11.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":12.5,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":13.75,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.25,"height":2},"dimension2Offset":{"x":-0.25,"y":0},"dimension2":{"width":1.5,"height":1}},{"position":{"x":0,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.75,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.75,"height":1}},{"position":{"x":1.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":2.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":3.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":4.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":5.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":6.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":7.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":8.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":9.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":10.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":11.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":12.75,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":0,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.25,"height":1}},{"position":{"x":1.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":2.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":3.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":4.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":5.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":6.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":7.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":8.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":9.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":10.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":11.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":12.25,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":2.75,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":2.75,"height":1}},{"position":{"x":0,"y":4},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.25,"height":1}},{"position":{"x":1.25,"y":4},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.25,"height":1}},{"position":{"x":2.5,"y":4},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.25,"height":1}},{"position":{"x":3.75,"y":4},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":6.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":6.25,"height":1}},{"position":{"x":10,"y":4},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.25,"height":1}},{"position":{"x":11.25,"y":4},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.25,"height":1}},{"position":{"x":12.5,"y":4},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.25,"height":1}},{"position":{"x":13.75,"y":4},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.25,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.25,"height":1}}];

        assertArrayEquality(parse(iso60Kle), iso60KeyElements);
    });

    test("Converts a KLE with odd rotations to a list of key elements", () => {
        const stressTestKle = [
            [{a:7},"",{w:1.25,h:1.5},""],
            [""],
            [""],
            [{y:-0.5,x:2,w:2.5},""],
            [{y:-0.5},"",""],
            [{w:1.5},""],
            [{y:-0.75,x:1.5,w:3},""],
            [{y:-0.25,w:1.5},""],
            [""],
            [{r:30,y:-5,x:1,w:2.5},""],
            [{r:45,rx:0.5,ry:0.5,y:-0.5,x:-0.5,a:4},"1"],
            [{r:-15,rx:2.25,ry:2.25,y:-0.75,a:7,w:4.75},"",""]  
        ]

        const stressTestKeyElements = [{"position":{"x":0,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":1,"y":0},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.25,"height":1.5},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.25,"height":1.5}},{"position":{"x":0,"y":1},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":0,"y":2},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":2,"y":2.5},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":2.5,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":2.5,"height":1}},{"position":{"x":0,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":1,"y":3},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":0,"y":4},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.5,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.5,"height":1}},{"position":{"x":1.5,"y":4.25},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":3,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":3,"height":1}},{"position":{"x":0,"y":5},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1.5,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1.5,"height":1}},{"position":{"x":0,"y":6},"rotation":{"degrees":0,"origin":{"x":0,"y":0}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":1,"y":2},"rotation":{"degrees":30,"origin":{"x":0,"y":0}},"dimension":{"width":2.5,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":2.5,"height":1}},{"position":{"x":0,"y":0},"rotation":{"degrees":45,"origin":{"x":0.5,"y":0.5}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}},{"position":{"x":2.25,"y":1.5},"rotation":{"degrees":-15,"origin":{"x":2.25,"y":2.25}},"dimension":{"width":4.75,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":4.75,"height":1}},{"position":{"x":7,"y":1.5},"rotation":{"degrees":-15,"origin":{"x":2.25,"y":2.25}},"dimension":{"width":1,"height":1},"dimension2Offset":{"x":0,"y":0},"dimension2":{"width":1,"height":1}}];

        assertArrayEquality(parse(stressTestKle), stressTestKeyElements);
    })
});

describe("Serializes a KLE json", () => {
    
});